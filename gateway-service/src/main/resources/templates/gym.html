<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>ì¥ì†Œ ê´€ë¦¬</title>-->
<!--    <link rel="stylesheet" href="/css/style.css">-->
<!--    <script src="/js/gym.js" defer></script>-->
<!--    <script src="/js/message.js" defer></script>-->
<!--</head>-->
<!--<body>-->
<!--&lt;!&ndash; ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ &ndash;&gt;-->
<!--<nav class="navbar">-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand" href="/">MSA í”„ë¡œì íŠ¸</a>-->
<!--        <div>-->
<!--            <a class="nav-link" href="/customers" style="margin-right: 20px; color: white;">ê³ ê°</a>-->
<!--            <a class="nav-link" href="/gym" style="color: #f1c40f;">ì²´ìœ¡ê´€</a>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<!--<div class="container">-->
<!--    <h1 style="margin-bottom: 1.5rem;">ğŸ‹ï¸ ì¥ì†Œ ê´€ë¦¬ í”„ë¡œê·¸ë¨</h1>-->

<!--    &lt;!&ndash; ì…ë ¥ í¼ &ndash;&gt;-->
<!--    <div class="card">-->
<!--        <h3>ìƒˆ ì¢…ëª© ë“±ë¡</h3>-->
<!--        <div class="form-group">-->
<!--            <label for="name">ìœ„ì¹˜</label>-->
<!--            <input type="text" id="name" class="form-control" placeholder="ì˜ˆ: í—¬ìŠ¤ì„¼í„° 3í˜¸ê´€">-->
<!--        </div>-->
<!--        <div class="form-group">-->
<!--            <label for="item">ì¢…ëª©</label>-->
<!--            <input type="text" id="item" class="form-control" placeholder="ì˜ˆ: í—¬ìŠ¤, ìš”ê°€ ë“±">-->
<!--        </div>-->
<!--        <button class="btn btn-primary" onclick="addGym()">ì¶”ê°€</button>-->
<!--    </div>-->

<!--    &lt;!&ndash; ì²´ìœ¡ê´€ ëª©ë¡ &ndash;&gt;-->
<!--    <div class="card">-->
<!--        <h3>ì²´ìœ¡ê´€ ëª©ë¡</h3>-->
<!--        <table class="table" id="gym-table">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th style="width: 10%;">ID</th>-->
<!--                <th style="width: 30%;">ìœ„ì¹˜</th>-->
<!--                <th style="width: 30%;">ì¢…ëª©</th>-->
<!--                <th style="width: 30%;">ì‘ì—…</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody></tbody>-->
<!--        </table>-->
<!--    </div>-->

<!--    &lt;!&ndash; ë©”ì‹œì§€ ëª©ë¡ &ndash;&gt;-->
<!--    <div class="card">-->
<!--        <h3>ë°›ì€ ë©”ì‹œì§€</h3>-->
<!--        <table class="table" id="message-table">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th style="width: 10%;">ID</th>-->
<!--                <th style="width: 60%;">ë‚´ìš©</th>-->
<!--                <th style="width: 30%;">ì‘ì—…</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody></tbody>-->
<!--        </table>-->
<!--    </div>-->
<!--    &lt;!&ndash; customer ë¦¬ìŠ¤íŠ¸ &ndash;&gt;-->
<!--    <div>-->
<!--        <h4>ğŸ“œ customer</h4>-->
<!--        <div id="customerList" class="row"></div>-->
<!--    </div>-->
<!--</div>-->
<!--<script>-->
<!--    console.log("ğŸš€ JS loaded once"); // ì¤‘ë³µ ë¡œë“œ ë””ë²„ê·¸ìš©-->
<!--    const apiUrl = "/api/cusmsg";-->
<!--    // âœ… ë©”ì‹œì§€ ëª©ë¡ ë¡œë“œ-->
<!--    async function loadMessages() {-->
<!--        try {-->
<!--            const res = await fetch(apiUrl);-->
<!--            const messages = await res.json();-->

<!--            const list = document.getElementById("customerList");-->
<!--            list.innerHTML = "";-->

<!--            messages.reverse().forEach(msg => {-->
<!--                const card = document.createElement("div");-->
<!--                card.className = "col-md-4 mb-3";-->
<!--                card.innerHTML = `-->
<!--                    <div class="card p-3">-->
<!--                        <h5>${msg.name}</h5>-->
<!--                        <p><strong>Phone:</strong> ${msg.phone}</p>-->
<!--                        <p><strong>Cusnum:</strong> ${msg.cusnum}</p>-->
<!--                    </div>-->
<!--                `;-->
<!--                list.appendChild(card);-->
<!--            });-->
<!--        } catch (err) {-->
<!--            console.error("âŒ Failed to load messages:", err);-->
<!--        }-->
<!--    }-->
<!--    // âœ… í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”-->
<!--    window.addEventListener("DOMContentLoaded", async () => {-->
<!--        await loadMessages();-->
<!--        initFormHandler();-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì¥ì†Œ ê´€ë¦¬</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/gym.js" defer></script>
    <script src="/js/message.js" defer></script>
</head>
<body>
<nav class="navbar">
    <div class="container">
        <a class="navbar-brand" href="/">MSA í”„ë¡œì íŠ¸</a>
        <div>
            <a class="nav-link" href="/customers" style="margin-right: 20px; color: white;">ê³ ê°</a>
            <a class="nav-link" href="/gym" style="color: #f1c40f;">ì²´ìœ¡ê´€</a>
        </div>
    </div>
</nav>

<div class="container">
    <h1 style="margin-bottom: 1.5rem;">ğŸ‹ï¸ ì¥ì†Œ ê´€ë¦¬ í”„ë¡œê·¸ë¨</h1>

    <div class="card p-3 mb-3"> <h3>ìƒˆ ì¢…ëª© ë“±ë¡</h3>
        <div class="form-group mb-2"> <label for="name">ìœ„ì¹˜</label>
            <input type="text" id="name" class="form-control" placeholder="ì˜ˆ: í—¬ìŠ¤ì„¼í„° 3í˜¸ê´€">
        </div>
        <div class="form-group mb-3"> <label for="item">ì¢…ëª©</label>
            <input type="text" id="item" class="form-control" placeholder="ì˜ˆ: í—¬ìŠ¤, ìš”ê°€ ë“±">
        </div>
        <button class="btn btn-primary" onclick="addGym()">ì¶”ê°€</button>
    </div>

    <div class="card p-3 mb-3"> <h3>ì²´ìœ¡ê´€ ëª©ë¡</h3>
        <table class="table" id="gym-table">
            <thead>
            <tr>
                <th style="width: 10%;">ID</th>
                <th style="width: 30%;">ìœ„ì¹˜</th>
                <th style="width: 30%;">ì¢…ëª©</th>
                <th style="width: 30%;">ì‘ì—…</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="card p-3 mb-3"> <h3>ë°›ì€ ë©”ì‹œì§€</h3>
        <table class="table" id="message-table">
            <thead>
            <tr>
                <th style="width: 10%;">ID</th>
                <th style="width: 60%;">ë‚´ìš©</th>
                <th style="width: 30%;">ì‘ì—…</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="card p-3"> <h4>ğŸ“œ customer</h4>
        <div id="customerList" class="row"></div>
    </div>
</div>
<script>
    console.log("ğŸš€ JS loaded once");
    const apiUrl = "/api/cusmsg"; // ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì¼ì¹˜í•˜ëŠ” ì£¼ì†Œ

    // âœ… ë©”ì‹œì§€ ëª©ë¡ ë¡œë“œ í•¨ìˆ˜
    async function loadMessages() {
        try {
            const res = await fetch(apiUrl); // GET /api/cusmsg í˜¸ì¶œ
            if (!res.ok) {
                throw new Error(`Failed to fetch: ${res.status}`);
            }
            const messages = await res.json();

            const list = document.getElementById("customerList");
            list.innerHTML = "";

            if (messages.length === 0) {
                list.innerHTML = "<p>ë°›ì€ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
                return;
            }

            messages.reverse().forEach(msg => {
                const card = document.createElement("div");
                // Bootstrap ê·¸ë¦¬ë“œì™€ ì¹´ë“œ ìŠ¤íƒ€ì¼ ì ìš©
                card.className = "col-md-4 mb-3";
                card.innerHTML = `
                    <div class="card p-3">
                        <h5>${msg.name}</h5>
                        <p><strong>Phone:</strong> ${msg.phone}</p>
                        <p><strong>Cusnum:</strong> ${msg.cusnum}</p>
                    </div>
                `;
                list.appendChild(card);
            });
        } catch (err) {
            console.error("âŒ Failed to load messages:", err);
            document.getElementById("customerList").innerHTML =
                "<p style='color:red;'>ë©”ì‹œì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>";
        }
    }

    // âœ… í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    window.addEventListener("DOMContentLoaded", async () => {
        // 2. loadMessages()ë§Œ í˜¸ì¶œ
        await loadMessages();

        // 3. initFormHandler() í˜¸ì¶œ ì‚­ì œ
        // initFormHandler();
    });
</script>
</body>
</html>
